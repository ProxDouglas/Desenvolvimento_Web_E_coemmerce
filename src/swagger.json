{
    "openapi": "3.0.0",
    "info": {
      "version": "1.0.0",
      "title": "API E-commerce Lobtec",
      "description": "Back end, testes e documentação:  NodeJS, MongoDB, Swagger, Insomnia"
    },
    "host": "localhost:45678",
    "basePath": "/",
    "tags": [
      {
        "name": "Categoria",
        "description": "Endpoints de Categoria"
      },
      {
        "name": "Produto",
        "description": "Produto endpoints"
      },
      {
        "name": "Anúncio",
        "description": "Anúncio endpoints"
      },
      {
        "name": "Usuário",
        "description": "Usuário endpoints"
      },
      {
        "name": "Autenticação",
        "description": "Autenticação Endpoint"
      }
    ],
    "schemes": [
      "http",
      "https"
    ],
    "securityDefinitions": {
      "Authorization": {
        "type": "apiKey",
        "name": "Authorization",
        "description": "Value: Bearer ",
        "in": "header",
        "scheme": "bearer"
      }
    },
    "consumes": [
      "application/json"
    ],
    "produces": [
      "application/json"
    ],
    "paths": {
      "/produtos": {
        "post": {
          "tags": [
            "Auth"
          ],
          "description": "",
          "parameters": [
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/LoginModel"
              }
            }
          ],
          "responses": {}
        }
      },
      
      "/usuario": {
        "post": {
          "tags": [
            "Usuário"
          ],
          "description": "Cria um usuário",
          "parameters": [
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/RegisterModel"
              }
            }
          ],
          "responses": {
            "422": {
              "description": "Unprocessable Entity"
            }
          }
        }
      },
      "/auth/verify": {
        "post": {
          "tags": [
            "Auth"
          ],
          "description": "",
          "parameters": [
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/VerifyEmailModel"
              }
            }
          ],
          "responses": {}
        }
      },
      "/auth/forgotPassword": {
        "post": {
          "tags": [
            "Auth"
          ],
          "description": "",
          "parameters": [
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/ForgotPassWordModel"
              }
            }
          ],
          "responses": {}
        }
      },
      "/auth/resetPassword": {
        "post": {
          "tags": [
            "Auth"
          ],
          "description": "",
          "parameters": [
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/ResetPasswordModel"
              }
            }
          ],
          "responses": {}
        }
      },
      "/auth/changePassword": {
        "post": {
          "tags": [
            "Auth"
          ],
          "description": "",
          "parameters": [
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/ChangePasswordModel"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/users": {
        "get": {
          "tags": [
            "Admin"
          ],
          "description": "",
          "parameters": [
            {
              "name": "limit",
              "in": "query",
              "type": "string"
            },
            {
              "name": "page",
              "in": "query",
              "type": "string"
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "401": {
              "description": "Unauthorized"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/users/{id}": {
        "get": {
          "tags": [
            "Admin"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "OK"
            },
            "401": {
              "description": "Unauthorized"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/seed": {
        "get": {
          "tags": [
            "Admin"
          ],
          "description": "",
          "parameters": [],
          "responses": {}
        }
      },
      "/categorias": {
        "get": {
          "tags": [
            "Categoria"
          ],
          "description": "Lista todas as categorias criadas",
          
          "responses": {
            "200": {
              "description": "OK"
            },
            "400": {
              "description": "Bad request"
            }
          }
        }
        
      },
      "/categoria":{
        "post":{
            "tags": [
                "Categoria"
            ],
            
            "description": "Cria uma categoria com os atributos 'nome', 'descrição', 'característica' e 'subcategorias(array).'",
            "parameters":[
                {
                    "name": "Nome",
                    "in":"body",
                    "required": true,
                    "schema":{
                        "$ref": "#/models/Categoria.js"
                    }
                }
            ],
            "requestBody":{
                "content":{
                    "application/json":{
                        "schema":{
                            "type": "object",
                            "properties":{
                                "nome":{
                                    "type":"string"
                                },
                                "descricao":{
                                    "type":"string"
                                },
                                "caracteristica":{
                                    "type":"string"
                                },
                                "subcategoria":{
                                    "type":"string",
                                    "nome":{
                                        "type":"string"
                                    },
                                    "descricao":{
                                        "type":"string"
                                    }
                                }
                            },
                            "example": {
                                "nome": "Eletronicos",
                                "descrição": "Categoria de produtos Eletronicos",
                                "característica": "Contém eletricidade",
                                "Sub-categorias": ["Smartphone","TV"]
                            }
                        }
                    }
                }
            },
            "responses":{
                "200":{
                    "description": "Categoria criada"
                },
                "400": {
                  "description": "Bad request"
                },
                "422": {
                  "description": "Unprocessable Entity"
                },
                "500": {
                  "description": "Internal Server Error"
                }
            }
        }
      },
      "/categoria/:id_categoria": {
        "put": {
          "tags": [
            "Categoria"
          ],
          "description": "Atualiza informações referentes a uma categoria específica. Pesquisa pelo ID da categoria.",
          "requestBody":{
            "content":{
                "application/json":{
                    "schema":{
                        "type": "string",
                        "example": {
                            "Nome": "Açougue"
                            
                        }
                    }
                }
            }
        },
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            },
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/models/Categoria.js"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "401": {
              "description": "Unauthorized"
            },
            "422": {
              "description": "Unprocessable Entity"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
        ,
        "get": {
          "tags": [
            "Categoria"
          ],
          "description": "",
          "requestBody":{
            "content":{
                "application/json":{
                    "schema":{
                        "type": "string",
                        "example": {
                            "_ID": "62bef50b0d4645ace4d94b2e"
                            
                        }
                    }
                }
            }
        },
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "OK"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          }
        },
        "delete": {
          "tags": [
            "Categoria"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "204": {
              "description": "No Content"
            },
            "401": {
              "description": "Unauthorized"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/comments": {
        "post": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/CommentModel"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "422": {
              "description": "Unprocessable Entity"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/comments/{id}": {
        "delete": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "204": {
              "description": "No Content"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/profile": {
        "get": {
          "tags": [
            "Profile"
          ],
          "description": "",
          "parameters": [],
          "responses": {
            "200": {
              "description": "OK"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        },
        "put": {
          "tags": [
            "Profile"
          ],
          "description": "",
          "parameters": [
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/UpdateUserModel"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "422": {
              "description": "Unprocessable Entity"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/stories": {
        "get": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "limit",
              "in": "query",
              "type": "string"
            },
            {
              "name": "page",
              "in": "query",
              "type": "string"
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "500": {
              "description": "Internal Server Error"
            }
          }
        },
        "post": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "consumes": [
            "multipart/form-data"
          ],
          "parameters": [
            {
              "name": "file",
              "in": "formData",
              "required": true,
              "type": "file"
            },
            {
              "name": "category",
              "in": "formData",
              "required": true,
              "type": "string"
            },
            {
              "name": "title",
              "in": "formData",
              "required": true,
              "type": "string"
            },
            {
              "name": "body",
              "in": "formData",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "401": {
              "description": "Unauthorized"
            },
            "422": {
              "description": "Unprocessable Entity"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/stories/top": {
        "get": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [],
          "responses": {
            "201": {
              "description": "Created"
            },
            "500": {
              "description": "Internal Server Error"
            }
          }
        }
      },
      "/api/stories/{id}": {
        "put": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            },
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/StoryModel"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "401": {
              "description": "Unauthorized"
            },
            "422": {
              "description": "Unprocessable Entity"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        },
        "get": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "OK"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          }
        },
        "delete": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "204": {
              "description": "No Content"
            },
            "401": {
              "description": "Unauthorized"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      },
      "/api/stories/slug/{slug}": {
        "get": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "slug",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "OK"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          }
        }
      },
      
      "/api/videos/top": {
        "get": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [],
          "responses": {
            "201": {
              "description": "Created"
            },
            "500": {
              "description": "Internal Server Error"
            }
          }
        }
      },
      "/api/videos/{id}": {
        "put": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            },
            {
              "name": "obj",
              "in": "body",
              "required": true,
              "schema": {
                "$ref": "#/definitions/VideoModel"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Created"
            },
            "401": {
              "description": "Unauthorized"
            },
            "422": {
              "description": "Unprocessable Entity"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        },
        "get": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "OK"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          }
        },
        "delete": {
          "tags": [
            "Posts"
          ],
          "description": "",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "204": {
              "description": "No Content"
            },
            "401": {
              "description": "Unauthorized"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          },
          "security": [
            {
              "Authorization": []
            }
          ]
        }
      }
    },
    "definitions": {
      "LoginModel": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "admin@markscodingspot.com"
          },
          "password": {
            "type": "string",
            "example": "Password123#"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "RegisterModel": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "John Snow"
          },
          "email": {
            "type": "string",
            "example": "mail@mail.com"
          },
          "password": {
            "type": "string",
            "example": "Password123#"
          }
        },
        "required": [
          "name",
          "email",
          "password"
        ]
      },
      "UpdateUserModel": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "John Snow"
          }
        },
        "required": [
          "name"
        ]
      },
      "CategoryModel": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "example": "Eletrônicos"
          },
          "descricao":{
            "type": "string",
            "example": "Categoria de artigos eletrônicos"
          }
        },
        "required": [
          "title"
        ]
      },
      "StoryModel": {
        "type": "object",
        "properties": {
          "category": {
            "type": "string",
            "example": "6064e654b5c7475bac63ad22"
          },
          "title": {
            "type": "string",
            "example": "Elon Musk Admits He Wants to Travel to Mars Because No One Hates Him There Yet"
          },
          "body": {
            "type": "string",
            "example": "AUSTIN, Texas — Wiping tears from his eyes at a recent press conference, SpaceX CEO Elon Musk revealed that the reason he’s so keen on traveling to Mars is not for the potential benefits to science, but because it’s the one place he can think of where no one hates him yet."
          }
        },
        "required": [
          "category",
          "title",
          "body"
        ]
      },
      "VideoModel": {
        "type": "object",
        "properties": {
          "videoId": {
            "type": "string",
            "example": "QWhJqvuB1ZA"
          },
          "title": {
            "type": "string",
            "example": "Welcome To America with Gad Elmaleh and Ron Livingston"
          }
        },
        "required": [
          "videoId",
          "title"
        ]
      },
      "CommentModel": {
        "type": "object",
        "properties": {
          "story": {
            "type": "string",
            "example": "606576d16bb28e33ecf2872c"
          },
          "body": {
            "type": "string",
            "example": "That's very funny (:"
          }
        },
        "required": [
          "story",
          "body"
        ]
      },
      "VerifyEmailModel": {
        "type": "object",
        "properties": {
          "code": {
            "type": "number",
            "example": 333333
          }
        },
        "required": [
          "code"
        ]
      },
      "ChangePasswordModel": {
        "type": "object",
        "properties": {
          "oldPassword": {
            "type": "string",
            "example": "Password123#"
          },
          "newPassword": {
            "type": "string",
            "example": "Password789#"
          }
        },
        "required": [
          "oldPassword",
          "newPassword"
        ]
      },
      "ForgotPassWordModel": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "coommark@gmail.com"
          }
        },
        "required": [
          "email"
        ]
      },
      "ResetPasswordModel": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "coommark@gmail.com"
          },
          "code": {
            "type": "number",
            "example": 999999
          },
          "newPassword": {
            "type": "string",
            "example": "Password789#"
          }
        },
        "required": [
          "email",
          "code",
          "newPassword"
        ]
      }
    }
  }